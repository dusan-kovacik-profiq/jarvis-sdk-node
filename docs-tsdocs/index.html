<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="keywords" content="typescript, documentation, docs, ts, jarvis-sdk-node"><title>jarvis-sdk-node</title><meta name="description" content="Typescript API documentation for jarvis-sdk-node v0.1.16"><link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous"><link id="highlightTheme" rel="stylesheet" crossorigin="anonymous"><link rel="icon" type="image/x-icon" href="/assets/media/favicon.ico"><link href="./assets/css/index.css" type="text/css" rel="stylesheet"><script>window.depth="./";window.ab=false;</script><script src="./assets/js/index.js"></script></head><body><header class="container-fluid navi"><div class="row"><div class="col-4"><input class="form-control search" id="search" type="search" placeholder="Search..." aria-label="Search"></div><div class="col-8"><div class="row float-end row-cols-auto" style="margin-top:5px"><div class="col clickable-icon" id="theme-icon"></div><div class="col"><a href="https://github.com/indykite/jarvis-sdk-nodejs-proto/tree/typedoc-test" class="clickable-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="bi bi-github" viewbox="0 0 16 16"><path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.012 8.012 0 0 0 16 8c0-4.42-3.58-8-8-8z"></path></svg></a></div><div class="col"><span style="font-size: 1.2em">v0.1.16</span></div></div></div></div></header><div class="container-fluid"><div class="row"><nav class="col-lg-auto sidebar" id="sidebar"><h1 class="lib-name text-center"><a href="index.html">jarvis-sdk-node</a></h1><p class="current-thing text-center">module <span class="module">jarvis-sdk-node</span></p><div class="sidebar-members"><div class="sidebar-member"><div class="collapsible-trigger"><span class="collapsible-arrow open"></span><span class="sidebar-category">Modules</span></div><div class="collapsible-body open"><span class="sidebar-category-member"><a href="m.grpc/index.html">grpc</a></span><span class="sidebar-category-member"><a href="m.sdk/index.html">sdk</a></span></div></div><div class="sidebar-member"><div class="collapsible-trigger"><span class="collapsible-arrow open"></span><span class="sidebar-category">Constants</span></div><div class="collapsible-body open"><span class="sidebar-category-member"><a href="constant/LIB_VERSION.html">LIB_VERSION</a></span></div></div></div></nav><main id="content" class="col content"><div class="d-none" id="search-menu"><h1>Search results</h1><div class="row" style="margin-top: 20px;margin-bottom: 20px"><div class="col-md-4"><p class="mini-header">Types</p><div><input type="checkbox" class="c-checkbox" id="search-option-classes" checked><span>Classes</span></div><div><input type="checkbox" class="c-checkbox" id="search-option-interfaces" checked><span>Interfaces</span></div><div><input type="checkbox" class="c-checkbox" id="search-option-enums" checked><span>Enums</span></div><div><input type="checkbox" class="c-checkbox" id="search-option-functions" checked><span>Functions</span></div><div><input type="checkbox" class="c-checkbox" id="search-option-types" checked><span>Type aliases</span></div><div><input type="checkbox" class="c-checkbox" id="search-option-constants"><span>Constants</span></div></div><div class="col-md-4"><p class="mini-header">Members</p><div><div><input type="checkbox" class="c-checkbox" id="search-option-properties" checked><span>Properties</span></div><div><input type="checkbox" class="c-checkbox" id="search-option-methods" checked><span>Methods</span></div><div><input type="checkbox" class="c-checkbox" id="search-option-getters" checked><span>Getters</span></div><div><input type="checkbox" class="c-checkbox" id="search-option-setters" checked><span>Setters</span></div><div><input type="checkbox" class="c-checkbox" id="search-option-enum-members"><span>Enum members</span></div><div><input type="checkbox" class="c-checkbox" id="search-option-privates"><span>Show privates</span></div></div></div><div class="col-md-4"><p class="mini-header">Other</p><div><div><input type="checkbox" class="c-checkbox" id="search-option-this-module-only"><span>In this module only</span></div></div></div></div><div id="search-result-list"></div></div><div id="content-main" class="d-none"><div><h1>Module <span class="referenceLink module">jarvis-sdk-node</span><a class="float-end sourceCode" href="https://github.com/indykite/jarvis-sdk-nodejs-proto/tree/typedoc-test/src" target="_blank">[src]</a></h1><a href="https://indykite.com">
    <img src="logo.png" alt="IndyKite logo" title="IndyKite.ID" align="right" width="200"/>
</a>

<h1 id="indykite-client-libraries-for-nodejs" class="section-header">IndyKite Client Libraries for Node.js</h1><p>IndyKite is a cloud identity platform built to secure and manage human &amp; non-person (IoT) identities and their data. This repository containts the JavaScript Library packages for <a href="https://indykite.com/platform">IndyKite Platform</a> Client SDK.</p>
<p><a href="https://www.npmjs.com/package/@indykiteone/jarvis-sdk-node"><img src="https://img.shields.io/npm/v/@indykiteone/jarvis-sdk-node.svg?style=flat-square" title="null" alt="NPM version" class="img-fluid"></a>
<img src="https://img.shields.io/npm/types/@indykiteone/jarvis-sdk-node?style=flat-square" title="null" alt="npm type definitions" class="img-fluid">
<a href="https://codecov.io/gh/indykite/jarvis-sdk-node"><img src="https://codecov.io/gh/indykite/jarvis-sdk-node/branch/master/graph/badge.svg?token=G6T2UWO9G1" title="null" alt="codecov" class="img-fluid"></a></p>
<p>Examples of functionality available in SDK:</p>
<ul>
<li>Token Introspection</li>
<li>CRUD Operations on Digital Twins </li>
<li>Change Password </li>
<li>Limited Configuration Management</li>
</ul>
<p>In order to access to the platform you must obtain an API key first. This key can be obtained either from the <a href="https://indykite.id">Admin Console</a> or request one from your point of contact at IndyKite.</p>
<h2 id="terminology" class="section-header">Terminology</h2><table>
<thead>
<tr>
<th>Definition</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td>Digital Twin</td>
<td>A digital twin is the digital identity of a physical entity on/in a software/identity system</td>
</tr>
<tr>
<td>Application Space ID</td>
<td>ID of the application where the digital twin belongs to</td>
</tr>
<tr>
<td>Application Agent ID</td>
<td>ID of the agent which makes the application available for the different calls</td>
</tr>
<tr>
<td>Tenant ID</td>
<td>ID of the tenant where the digital twin belongs to. The tenant is belong to an application space</td>
</tr>
<tr>
<td>Private Key and Settings</td>
<td>The secret which required to reach the system. Indykite provides the necessary secrets</td>
</tr>
<tr>
<td>Property</td>
<td>The digital twin&#39;s property (eg.: email, name)</td>
</tr>
<tr>
<td>JWT</td>
<td>JSON Web Tokens</td>
</tr>
<tr>
<td>Introspect</td>
<td>A process used to validate the token and to retrieve properties assigned to the token</td>
</tr>
<tr>
<td>Patch property</td>
<td>Add, change or delete a property of a digital twin</td>
</tr>
</tbody></table>
<h2 id="documentation" class="section-header">Documentation</h2><p>Visit the IndyKite One Developer Community site for official <a href="https://indykite.one/blog?category=5e3e9297-3451-4b52-91ee-8027dcd1789c">IndyKite documentation</a> and to find out how to use the entire platform for your project.</p>
<h2 id="installation" class="section-header">Installation</h2><pre><code class="hljs">npm i @indykiteone/jarvis-sdk-node</code></pre><h2 id="getting-started" class="section-header">Getting Started</h2><h3 id="trial" class="section-header">Trial</h3><p>For a trial please contact <a href="https://www.indykite.com/contact-us">IndyKite</a> to setup and
configure the platform.</p>
<h3 id="config" class="section-header">Config</h3><p>The IndyKite SDK reads config properties from a JSON formatted configuration file. The path to this file is provided to your application via an environment variable  Once you have the config information (After you&#39;ve registered and setup an application space) then you need to create the json file (you can find an example here: <a href="jarvis-proto-sdk/config_example.json">example_config.json</a>) then create the <code>INDYKITE_APPLICATION_CREDENTIALS_FILE</code> environment variable which will contain the path to the json configuration file (see the example below).</p>
<pre><code class="hljs">export INDYKITE_APPLICATION_CREDENTIALS_FILE=&lt;path_to_config_file&gt;/config.json</code></pre><h3 id="service-account-config" class="section-header">Service account config</h3><p>In order to make some changes to your spaces you have to have a file with your service account credentials. You can create this file using the indykite.id platform where you need to select your customer space, select the <code>Service accounts</code> item from the left menu and finally add a new service account. Then you have to create the <code>INDYKITE_SERVICE_ACCOUNT_CREDENTIALS_FILE</code> environment variable with the path to the credentials file you have downloaded.</p>
<pre><code class="hljs">export INDYKITE_SERVICE_ACCOUNT_CREDENTIALS_FILE=&lt;path_to_service_account_file&gt;/service_account.json</code></pre><h3 id="import-the-sdk-into-your-application" class="section-header">Import the SDK into your application</h3><pre><code class="hljs"><span class="hljs-keyword">import</span> { <span><span class="c-tooltip"><a class="reference-link object" href="m.sdk/class/IdentityClient.html">IdentityClient</a><span class="c-tooltip-content"><span class="keyword">class </span><span class="item-name object">IdentityClient</span><span style="display:block" class="monospace fw-bold">sdk/<span class="item-name object">IdentityClient</span></span></span></span></span>, <span><span class="c-tooltip"><a class="reference-link object" href="m.sdk/m.model/class/TokenInfo.html">TokenInfo</a><span class="c-tooltip-content"><span class="keyword">class </span><span class="item-name object">TokenInfo</span><span style="display:block" class="monospace fw-bold">sdk/model/<span class="item-name object">TokenInfo</span></span></span></span></span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@indykiteone/jarvis-sdk-node&#x27;</span>;
<span class="hljs-keyword">import</span> { <span><span class="c-tooltip"><a class="reference-link object" href="m.grpc/m.indykite/m.identity/m.v1beta1/interface/Property.html">Property</a><span class="c-tooltip-content"><span class="keyword">interface </span><span class="item-name object">Property</span><span style="display:block" class="monospace fw-bold">grpc/indykite/identity/v1beta1/<span class="item-name object">Property</span></span></span></span></span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@indykiteone/jarvis-sdk-node&#x27;</span>;</code></pre><h3 id="creating-a-new-client-connection-amp-reading-the-user-token-from-env" class="section-header">Creating a new client connection &amp; reading the user token from env</h3><pre><code class="hljs"><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">getConnection</span>(<span class="hljs-params"></span>) {

  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;Starting Get Connection&quot;</span>);
  <span class="hljs-keyword">const</span> sdk = <span class="hljs-keyword">await</span> <span><span class="c-tooltip"><a class="reference-link object" href="m.sdk/class/IdentityClient.html">IdentityClient</a><span class="c-tooltip-content"><span class="keyword">class </span><span class="item-name object">IdentityClient</span><span style="display:block" class="monospace fw-bold">sdk/<span class="item-name object">IdentityClient</span></span></span></span></span>.<span class="hljs-title function_">createInstance</span>();

  <span class="hljs-keyword">return</span> sdk;
}</code></pre><h3 id="to-introspect-a-user-token" class="section-header">To introspect a user token</h3><pre><code class="hljs"><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">tokenIntrospect</span>(<span class="hljs-params">sdk:IdentityClient</span>) {

  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;Starting tokenIntrospect&quot;</span>);
  <span class="hljs-keyword">const</span> tokenInfo = <span class="hljs-keyword">await</span> sdk.<span class="hljs-title function_">introspectToken</span>(userToken);
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;Token introspection&#x27;</span>, JSON.<span class="hljs-title function_">stringify</span>(tokenInfo, <span class="hljs-literal">null</span>, <span class="hljs-number">2</span>))
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;Token Active: &#x27;</span>, tokenInfo.<span class="hljs-property">active</span>);
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;Token appSpaceId: &#x27;</span>, tokenInfo.<span class="hljs-property">appSpaceId</span>);
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;Token applicationId: &#x27;</span>, tokenInfo.<span class="hljs-property">applicationId</span>);
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;Token authenticationTime: &#x27;</span>, tokenInfo.<span class="hljs-property">authenticationTime</span>);
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;Token customerId: &#x27;</span>, tokenInfo.<span class="hljs-property">customerId</span>);
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;Token expireTime: &#x27;</span>, tokenInfo.<span class="hljs-property">expireTime</span>);
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;Token impersonated: &#x27;</span>, tokenInfo.<span class="hljs-property">impersonated</span>);
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;Token issueTime: &#x27;</span>, tokenInfo.<span class="hljs-property">issueTime</span>);
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;Token providerInfo: &#x27;</span>, tokenInfo.<span class="hljs-property">providerInfo</span>);
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;Token subject: &#x27;</span>, tokenInfo.<span class="hljs-property">subject</span>);

  <span class="hljs-keyword">return</span> tokenInfo;
}</code></pre><p>The tokeninfo object has several methods that can be used to get a variety of details related to the introspected token.</p>
<p><strong>tokenInfo.active</strong>: boolean (true/false) - will return true if the token is still active</p>
<p><strong>tokenInfo.subject.id</strong>: The UUID formated id that identifies the subject of the token </p>
<p><strong>tokenInfo.customerId</strong>: The UUID formatted id that identifies the customer subscription</p>
<p><strong>tokenInfo.subject.tenantId</strong>: The UUID formatted id that identifies the tenant that the subject belongs to</p>
<p><strong>tokenInfo.appSpaceId</strong>: The UUID formatted id that identifies the Customer Application Space</p>
<p><strong>tokenInfo.applicationId</strong>: The UUID formatted id that identifies the application profile that was created for the application that you are developing.</p>
<p><strong>tokenInfo.authenticationTime</strong>: The time that the subject initially authenticated</p>
<p><strong>tokenInfo.expireTime</strong>: The time that the token will expire.</p>
<p><strong>tokenInfo.impersonated</strong>:</p>
<p><strong>tokenInfo.issueTime</strong>: The time that the token was initially issued </p>
<p><strong>tokenInfo.providerInfo</strong>: The token provider url</p>
<h3 id="retrieving-a-digital-twin-using-a-token" class="section-header">Retrieving a Digital Twin using a token</h3><pre><code class="hljs"><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">getDT</span>(<span class="hljs-params">sdk:IdentityClient</span>) {

  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;Starting getDT&quot;</span>);
  <span class="hljs-keyword">const</span> dtByToken = <span class="hljs-keyword">await</span> sdk.<span class="hljs-title function_">getDigitalTwinByToken</span>(userToken, [<span class="hljs-string">&#x27;email&#x27;</span>]);

  <span class="hljs-keyword">return</span> dtByToken;
}</code></pre><h3 id="implementing-forgot-password" class="section-header">Implementing Forgot Password</h3><pre><code class="hljs"><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">forgotPassword</span>(<span class="hljs-params">sdk:IdentityClient</span>) {

  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;Starting forgetPassword&quot;</span>);
  <span class="hljs-comment">// startForgottenPasswordFlow(digitalTwinId: Buffer, tenantId: Buffer): Promise&lt;StartForgottenPasswordFlowResponse&gt;</span>

  <span class="hljs-keyword">const</span> digitalTwin = <span class="hljs-title function_">getDT</span>(sdk);
  <span class="hljs-keyword">const</span> dt = (<span class="hljs-keyword">await</span> digitalTwin).<span class="hljs-property">digitalTwin</span>;

  <span class="hljs-keyword">if</span> (!dt) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;Missing DigitalTwin?&#x27;</span>);
    <span class="hljs-keyword">return</span>;
  }

  <span class="hljs-keyword">const</span> digitalTwinID = dt.<span class="hljs-property">id</span>;
  <span class="hljs-keyword">const</span> digitalTwinTenantID = dt.<span class="hljs-property">tenantId</span>;
  
  <span class="hljs-keyword">const</span> forgotPasswordResponse = <span class="hljs-keyword">await</span> sdk.<span class="hljs-title function_">startForgottenPasswordFlow</span>(<span><span class="c-tooltip"><a class="reference-link object" href="m.sdk/m.utils/class/Utils.html">Utils</a><span class="c-tooltip-content"><span class="keyword">class </span><span class="item-name object">Utils</span><span style="display:block" class="monospace fw-bold">sdk/utils/<span class="item-name object">Utils</span></span></span></span></span>.<span class="hljs-title function_">uuidToString</span>(digitalTwinID), <span><span class="c-tooltip"><a class="reference-link object" href="m.sdk/m.utils/class/Utils.html">Utils</a><span class="c-tooltip-content"><span class="keyword">class </span><span class="item-name object">Utils</span><span style="display:block" class="monospace fw-bold">sdk/utils/<span class="item-name object">Utils</span></span></span></span></span>.<span class="hljs-title function_">uuidToString</span>(digitalTwinTenantID));
}</code></pre><h3 id="changing-dt-passwords" class="section-header">Changing DT passwords</h3><pre><code class="hljs"><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">changePass</span>(<span class="hljs-params">sdk:IdentityClient</span>) {
  
  <span class="hljs-comment">// changePassword(digitaltwinid, tenantid, password)</span>
  <span class="hljs-comment">// changePasswordByToken</span>

  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;Starting changePass()&quot;</span>);

  <span class="hljs-keyword">const</span> digitalTwin = <span class="hljs-title function_">getDT</span>(sdk);
  <span class="hljs-keyword">const</span> dt = (<span class="hljs-keyword">await</span> digitalTwin).<span class="hljs-property">digitalTwin</span>;

  <span class="hljs-keyword">if</span> (!dt) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;Missing DigitalTwin?&#x27;</span>);
    <span class="hljs-keyword">return</span>;
  }

  <span class="hljs-keyword">const</span> digitalTwinID = dt.<span class="hljs-property">id</span>
  <span class="hljs-keyword">const</span> digitalTwinTenantID = dt.<span class="hljs-property">tenantId</span>;
  <span class="hljs-keyword">var</span> newPassword = <span class="hljs-string">&#x27;MyNewPassword&#x27;</span>; 

  <span class="hljs-comment">// changePassword(digitaltwinid, tenantid, password)</span>
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;Digital Twin ID: &quot;</span>, digitalTwinID);
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;Tenant ID: &quot;</span>, digitalTwinTenantID);
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;Password: &quot;</span>, newPassword);

  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;changePassword() function called&quot;</span>);
  <span class="hljs-keyword">const</span> changePasswordResponse = <span class="hljs-keyword">await</span> sdk.<span class="hljs-title function_">changePassword</span>(digitalTwinID, digitalTwinTenantID, newPassword);
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;Change Password Resp: &quot;</span>, changePasswordResponse);
}
</code></pre><h3 id="fetch-dt-properties-using-a-token" class="section-header">Fetch DT properties using a token</h3><pre><code class="hljs"><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">getProperty</span>(<span class="hljs-params">sdk:IdentityClient</span>) {

  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;Starting Get Property&quot;</span>);
  
  <span class="hljs-comment">// <span class="hljs-doctag">TODO:</span></span>
  <span class="hljs-comment">// getDigitalTwin(digitalTwinId, tenantId, properties) </span>

  <span class="hljs-comment">// Get Digital Twin using token</span>
  <span class="hljs-keyword">const</span> digitaltwin = <span class="hljs-title function_">getDT</span>(sdk);
  <span class="hljs-keyword">const</span> dt = (<span class="hljs-keyword">await</span> digitaltwin).<span class="hljs-property">digitalTwin</span>;
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;Digital Twin By Token:&#x27;</span>, JSON.<span class="hljs-title function_">stringify</span>(dt, <span class="hljs-literal">null</span>, <span class="hljs-number">2</span>));

  <span class="hljs-keyword">if</span> (!dt) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;Missing DigitalTwin?&#x27;</span>);
    <span class="hljs-keyword">return</span>;
  }

  <span class="hljs-comment">// Examples of getting properties</span>
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;Get email property:&#x27;</span>, dt.<span class="hljs-title function_">getProperty</span>(<span class="hljs-string">&#x27;email&#x27;</span>));
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;Get email value:&#x27;</span>, dt.<span class="hljs-title function_">getPropertyValue</span>(<span class="hljs-string">&#x27;email&#x27;</span>));
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;Get email value:&#x27;</span>, dt.<span class="hljs-title function_">getProperty</span>(<span class="hljs-string">&#x27;email&#x27;</span>)?.<span class="hljs-property">value</span>);
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;Get all email properties:&#x27;</span>, dt.<span class="hljs-title function_">getProperties</span>(<span class="hljs-string">&#x27;email&#x27;</span>));
}</code></pre><h3 id="add-properties-to-a-dt" class="section-header">Add properties to a DT</h3><pre><code class="hljs"><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">addProperty</span>(<span class="hljs-params">sdk:IdentityClient</span>) {

  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;Starting add Property&quot;</span>);

  <span class="hljs-keyword">const</span> digitaltwin = <span class="hljs-title function_">getDT</span>(sdk);
  <span class="hljs-keyword">const</span> dt = (<span class="hljs-keyword">await</span> digitaltwin).<span class="hljs-property">digitalTwin</span>;
  
  <span class="hljs-keyword">if</span> (!dt) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;Missing DigitalTwin?&#x27;</span>);
    <span class="hljs-keyword">return</span>;
  }
  <span class="hljs-keyword">const</span> tid = dt.<span class="hljs-property">tenantId</span>;

  <span class="hljs-keyword">const</span> email = <span class="hljs-title function_">getRandomEmail</span>();

  dt.<span class="hljs-title function_">addProperty</span>(<span class="hljs-keyword">new</span> <span><span class="c-tooltip"><a class="reference-link object" href="m.grpc/m.indykite/m.identity/m.v1beta1/interface/Property.html">Property</a><span class="c-tooltip-content"><span class="keyword">interface </span><span class="item-name object">Property</span><span style="display:block" class="monospace fw-bold">grpc/indykite/identity/v1beta1/<span class="item-name object">Property</span></span></span></span></span>(<span class="hljs-string">&#x27;email&#x27;</span>).<span class="hljs-title function_">withValue</span>(email));
</code></pre><h3 id="patching-the-database-after-adding-a-new-property" class="section-header">Patching the database after adding a new property</h3><pre><code class="hljs">  <span class="hljs-comment">// patchProperties() </span>
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;PatchProperties(): &quot;</span>);
  <span class="hljs-keyword">const</span> patch = <span class="hljs-keyword">await</span> sdk.<span class="hljs-title function_">patchProperties</span>(dt.<span class="hljs-property">id</span>, tid, dt);
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;Patch Response: &#x27;</span>, JSON.<span class="hljs-title function_">stringify</span>(patch, <span class="hljs-literal">null</span>, <span class="hljs-number">2</span>));

  <span class="hljs-comment">// or </span>

  <span class="hljs-comment">// patchPropertiesByToken to save the changes to the remote database</span>
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;patchPropertiesByToken(): &quot;</span>)
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;Get Patch Operation: &quot;</span> + JSON.<span class="hljs-title function_">stringify</span>(dt.<span class="hljs-title function_">getPatchOperation</span>(), <span class="hljs-literal">null</span>, <span class="hljs-number">2</span>));
  <span class="hljs-keyword">const</span> patchByToken = <span class="hljs-keyword">await</span> sdk.<span class="hljs-title function_">patchPropertiesByToken</span>(userToken, dt); 
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;Patch by token response:&#x27;</span>, JSON.<span class="hljs-title function_">stringify</span>(patchByToken, <span class="hljs-literal">null</span>, <span class="hljs-number">2</span>));</code></pre><h3 id="updating-existing-dt-properties" class="section-header">Updating existing DT properties</h3><pre><code class="hljs"><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">updateProp</span>(<span class="hljs-params">sdk:IdentityClient</span>) {

  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;Starting updateProperty()&quot;</span>);

  <span class="hljs-keyword">const</span> digitalTwin = <span class="hljs-title function_">getDT</span>(sdk);
  <span class="hljs-keyword">const</span> dt = (<span class="hljs-keyword">await</span> digitalTwin).<span class="hljs-property">digitalTwin</span>;

  <span class="hljs-keyword">if</span> (!dt) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;Missing DigitalTwin?&#x27;</span>);
    <span class="hljs-keyword">return</span>;
  }

  <span class="hljs-keyword">const</span> digitalTwinID = dt.<span class="hljs-property">id</span>
  <span class="hljs-keyword">const</span> digitalTwinTenantID = dt.<span class="hljs-property">tenantId</span>;
  <span class="hljs-keyword">const</span> email = <span class="hljs-string">&#x27;brad.tumy@indykite.com&#x27;</span>;
  
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;Update the DT with this email: &quot;</span>, email);
  dt.<span class="hljs-title function_">updatePropertyValue</span>(<span class="hljs-keyword">new</span> <span><span class="c-tooltip"><a class="reference-link object" href="m.grpc/m.indykite/m.identity/m.v1beta1/interface/Property.html">Property</a><span class="c-tooltip-content"><span class="keyword">interface </span><span class="item-name object">Property</span><span style="display:block" class="monospace fw-bold">grpc/indykite/identity/v1beta1/<span class="item-name object">Property</span></span></span></span></span>(<span class="hljs-string">&#x27;email&#x27;</span>), email);
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;Get Patch Operation: &quot;</span> + JSON.<span class="hljs-title function_">stringify</span>(dt.<span class="hljs-title function_">getPatchOperation</span>(), <span class="hljs-literal">null</span>, <span class="hljs-number">2</span>));
  
  <span class="hljs-keyword">const</span> patch = <span class="hljs-keyword">await</span> sdk.<span class="hljs-title function_">patchProperties</span>(digitalTwinID, digitalTwinTenantID, dt);
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;Get all email properties:&#x27;</span>, <span class="hljs-keyword">await</span> dt.<span class="hljs-title function_">getProperties</span>(<span class="hljs-string">&#x27;email&#x27;</span>)); 
}</code></pre><h3 id="enriching-access-token" class="section-header">Enriching access token</h3><p>You can enrich an access token with token claims and session claims with the following code:</p>
<pre><code class="hljs"><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">enrichToken</span>(<span class="hljs-params">sdk:IdentityClient</span>) {
  <span class="hljs-keyword">const</span> tokenClaims = {
    <span class="hljs-attr">stringClaim</span>: <span class="hljs-string">&quot;stringValue&quot;</span>,
    <span class="hljs-attr">numberClaim</span>: <span class="hljs-number">42</span>,
    <span class="hljs-attr">mapClaim</span>: {
      <span class="hljs-attr">key</span>: <span class="hljs-string">&quot;value&quot;</span>,
    },
  };

  <span class="hljs-keyword">const</span> sessionClaims = {
    <span class="hljs-attr">boolClaim</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">nullClaim</span>: <span class="hljs-literal">null</span>,
    <span class="hljs-attr">arrayClaim</span>: [<span class="hljs-string">&quot;stringValue&quot;</span>]
  };

  <span class="hljs-keyword">await</span> sdk.<span class="hljs-title function_">enrichToken</span>(userToken, tokenClaims, sessionClaims);
}</code></pre><blockquote>
<p>Note: You need to refresh the access token so that the access token is enriched with the claims.</p>
</blockquote>
<h2 id="roadmap" class="section-header">Roadmap</h2><p>Checkout our roadmap on our <a href="https://github.com/indykite/jarvis-sdk-nodejs-proto/issues">issues page</a></p>
<h2 id="contributing" class="section-header">Contributing</h2><p><a href="contributing.md">Contribution guidelines for this project</a></p>
<h2 id="support-feedback-connect-with-other-developers" class="section-header">Support, Feedback, Connect with other developers</h2><p>We&#39;d love to have you connect with us or other community developers over at <a href="https://indykite.one">IndyKite.one</a> </p>
<p>Feel free to file a bug, submit an issue or give us feedback on our <a href="https://github.com/indykite/jarvis-sdk-node/issues">issues page</a></p>
<h2 id="vulnerability-reporting" class="section-header">Vulnerability Reporting</h2><p><a href="responsible_disclosure.md">Responsible Disclosure</a></p>
<h2 id="changelog" class="section-header">Changelog</h2><p>Coming Soon!</p>
<h2 id="contributers--acknowledgements" class="section-header">Contributers / Acknowledgements</h2><p>Coming Soon!</p>
<h2 id="what-is-indykite" class="section-header">What is IndyKite</h2><p>IndyKite is a cloud identity platform built to secure and manage human &amp; non-person (IoT) identities and their data. Based on open source standards, the cloud platform gives developers the ability to secure data and embed identity controls into their Web 3.0 applications. Empowering the world’s 23 million developers without the need to involve security and identity specialists.</p>
<h2 id="license" class="section-header">License</h2><p><a href="LICENSE">This project is licensed under the terms of the Apache 2.0 license.</a></p>
<div class="row"><div class="col"><h2>Re-Exports</h2><div><span class="keyword">exports </span><span class="collapsible-trigger"><span class="collapsible-arrow"></span><span class="keyword">2 things</span><span class="keyword"> from </span><span class="c-tooltip"><a class="reference-link module" href="m.grpc/m.indykite/m.identity/m.v1beta1/index.html">v1beta1</a><span class="c-tooltip-content"><span class="keyword">module </span><span class="item-name module">v1beta1</span><span style="display:block" class="monospace fw-bold">grpc/indykite/identity/v1beta1</span></span></span></span><div class="collapsible-body"><div><span><span><span class="c-tooltip"><a class="reference-link object" href="m.grpc/m.indykite/m.identity/m.v1beta1/enum/DigitalTwinKind.html">DigitalTwinKind</a><span class="c-tooltip-content"><span class="keyword">enum </span><span class="item-name object">DigitalTwinKind</span><span style="display:block" class="monospace fw-bold">grpc/indykite/identity/v1beta1/<span class="item-name object">DigitalTwinKind</span></span></span></span></span></span></div><div><span><span><span class="c-tooltip"><a class="reference-link object" href="m.grpc/m.indykite/m.identity/m.v1beta1/enum/DigitalTwinState.html">DigitalTwinState</a><span class="c-tooltip-content"><span class="keyword">enum </span><span class="item-name object">DigitalTwinState</span><span style="display:block" class="monospace fw-bold">grpc/indykite/identity/v1beta1/<span class="item-name object">DigitalTwinState</span></span></span></span></span></span></div></div></div><div><span class="keyword">exports </span><span><span><span class="c-tooltip"><a class="reference-link object" href="m.sdk/class/IdentityClient.html">IdentityClient</a><span class="c-tooltip-content"><span class="keyword">class </span><span class="item-name object">IdentityClient</span><span style="display:block" class="monospace fw-bold">sdk/<span class="item-name object">IdentityClient</span></span></span></span></span></span><span class="keyword"> from </span><span class="c-tooltip"><a class="reference-link module" href="m.sdk/index.html">sdk</a><span class="c-tooltip-content"><span class="keyword">module </span><span class="item-name module">sdk</span><span style="display:block" class="monospace fw-bold">sdk</span></span></span></div><div><span class="keyword">exports </span><span class="symbol">*</span><span class="keyword"> from </span><span class="c-tooltip"><a class="reference-link module" href="m.sdk/m.model/index.html">model</a><span class="c-tooltip-content"><span class="keyword">module </span><span class="item-name module">model</span><span style="display:block" class="monospace fw-bold">sdk/model</span></span></span></div></div></div></div></div></main></div></div><div id="to-top" class="btn-to-top"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="bi bi-arrow-up" viewbox="0 0 16 16"><path fill-rule="evenodd" d="M8 15a.5.5 0 0 0 .5-.5V2.707l3.146 3.147a.5.5 0 0 0 .708-.708l-4-4a.5.5 0 0 0-.708 0l-4 4a.5.5 0 1 0 .708.708L7.5 2.707V14.5a.5.5 0 0 0 .5.5z"></path></svg></div><div id="sidebar-arrow" class="sidebar-arrow"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="bi bi-arrow-right" viewbox="0 0 16 16"><path fill-rule="evenodd" d="M1 8a.5.5 0 0 1 .5-.5h11.793l-3.147-3.146a.5.5 0 0 1 .708-.708l4 4a.5.5 0 0 1 0 .708l-4 4a.5.5 0 0 1-.708-.708L13.293 8.5H1.5A.5.5 0 0 1 1 8z"></path></svg></div></body></html>